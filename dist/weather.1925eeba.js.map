{"version":3,"sources":["src/js/weather.js","node_modules/parcel-bundler/src/builtins/bundle-url.js","node_modules/parcel-bundler/src/builtins/css-loader.js"],"names":["COORDS","API_KEY","weatherContainer","document","querySelector","weatherIcon","weatherSpan","saveCoords","coordsObj","localStorage","setItem","JSON","stringify","getWeather","lat","lon","fetch","then","res","json","data","temp","main","weathers","weather","length","src","icon","innerHTML","handleGeoSucc","position","latitude","coords","longitude","handleGeoErr","console","log","requestCoords","navigator","geolocation","getCurrentPosition","loadCoords","loadedCoords","getItem","parse","init","bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","match","getBaseURL","url","replace","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","remove","href","split","Date","now","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","setTimeout","links","querySelectorAll","i","module"],"mappings":"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","file":"weather.1925eeba.js","sourceRoot":"..","sourcesContent":["import \"../styles/weather.css\";\r\n\r\nconst COORDS = \"coords\";\r\nconst API_KEY = \"76a3e5ae28ff2a5f76a18c6cb0242bde\";\r\n\r\nconst weatherContainer = document.querySelector(\".js-weather-container\");\r\nconst weatherIcon = weatherContainer.querySelector(\".js-weather-icon\");\r\nconst weatherSpan = weatherContainer.querySelector(\".js-weather\");\r\n\r\nfunction saveCoords(coordsObj) {\r\n    localStorage.setItem(COORDS, JSON.stringify(coordsObj));\r\n}\r\nfunction getWeather(lat, lon) {\r\n    fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${API_KEY}&units=metric`)\r\n    .then(res => res.json())\r\n    .then(data => {\r\n        const temp = data.main.temp;\r\n        const weathers = data.weather[data.weather.length -1];\r\n        weatherIcon.src = `https://openweathermap.org/img/wn/${weathers.icon}@2x.png`;\r\n        weatherSpan.innerHTML = `${temp}&#176;C ${weathers.main}`;\r\n    })\r\n}\r\nfunction handleGeoSucc(position) {\r\n    const latitude = position.coords.latitude;  // 경도  \r\n    const longitude = position.coords.longitude;  // 위도\r\n    const coordsObj = {\r\n        latitude,\r\n        longitude\r\n    }\r\n    saveCoords(coordsObj);\r\n    getWeather(latitude, longitude);\r\n}\r\n\r\nfunction handleGeoErr() {\r\n    console.log(\"geo err\");\r\n}\r\n\r\nfunction requestCoords() {\r\n    navigator.geolocation.getCurrentPosition(handleGeoSucc, handleGeoErr);\r\n}\r\n\r\nfunction loadCoords() {\r\n    const loadedCoords = localStorage.getItem(COORDS);\r\n    if(loadedCoords === null){\r\n        requestCoords();\r\n    }else {\r\n        const coords = JSON.parse(loadedCoords);\r\n        getWeather(coords.latitude, coords.longitude);\r\n    }\r\n}\r\n\r\nfunction init () {\r\n    loadCoords();\r\n}\r\n\r\ninit();","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n"]}